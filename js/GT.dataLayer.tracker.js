(function(a,b){if(!b||(a.dtmParameter!="A"&&a.dtmParameter!="B")){return;}b.notify("Running: datalayer.v2.tracker.js",2);_DigitalData.prototype.track=function(c,d){a.digitalData=this.prepareDTM2DataLayer(c,d);if(this.beforeTrack){this.beforeTrack();}if(this.afterTrack){this.afterTrack();}DTM2.utils.clearOmniVars();};_DigitalData.prototype.trackSearch=function(){this.track("Search Complete");};_DigitalData.prototype.trackApplication=function(){this.track("App Direct Call");};_DigitalData.prototype.prepareDTM2DataLayer=function(k,e){var j="";if(window.digitalData&&window.digitalData.page&&window.digitalData.page.pageInfo&&window.digitalData.page.pageInfo.pageName){j=window.digitalData.page.pageInfo.pageName;}var c=DTM2.getBreadcrumbLevels();var f=DTM2.getStepNo();if(f){this.digitalData.application.stepNo=f;}else{this.digitalData.application.stepNo="";}var d=DTM2.utils.optVal(window.s_appInterStep).getOrElse(undefined);if(d){if(this.digitalData.application.stepNo){this.digitalData.application.stepNo+=d;}}this.digitalData.application.application.type=DTM2.utils.optVal(window.s_appType).getOrElse("");this.digitalData.application.curreny="";this.digitalData.application.errorType=DTM2.getErrorExists();if(!window.s_flowID){window.s_flowID="999";}this.digitalData.gtCustom.applicationFlowId=window.s_flowID;this.digitalData.application.fulfillmentModel=DTM2.getFullfillmentType(window.s_flowID);if(window.s_loginStatus){this.digitalData.user.userState=DTM2.utils.optVal(window.s_loginStatus).getOrElse("");}this.digitalData.user.profileID=DTM2.utils.optVal(window.s_UID).getOrElse("");this.digitalData.internalCampaign.event.eventInfo.siteActionName="";this.digitalData.internalCampaign.event.eventInfo.eventAction="";this.digitalData.page.pageInfo.pageSegment=DTM2.utils.optVal(window.s_pageSegment).getOrElse("");var l=DTM2.getSearchResultsCount();if(l&&l!=""){this.digitalData.page.pageActivity.search.originalPage=j;this.digitalData.page.pageActivity.search.onSiteSearchResults=DTM2.getSearchResultsCount();this.digitalData.page.pageActivity.search.onSiteSearchTerm=DTM2.getSearchText();}this.digitalData.page.pageInfo.geoRegion="";if(window.s_areaPP){this.digitalData.page.pageInfo.area=DTM2.utils.optVal(window.s_areaPP).getOrElse("");}var g="";if(window.isFormApp){g=DTM2.utils.optVal(window.s_formPageName).getOrElse("");}else{g=getPageName(c,true);}if(g){g=g.toLowerCase();}this.digitalData.application.application.name=DTM2.getApplicationName(c,g);this.digitalData.page.pageInfo.pageName=this.digitalData.page.pageInfo.area+":"+this.digitalData.page.pageInfo.pageSegment+":"+g;for(var h=0;h<c.length;h++){this.digitalData.page.pageInfo["level"+(h+1)]=DTM2.replaceTurkish(c[h]);}var n=DTM2.getPageStepName(this.digitalData.application.stepNo,g);if(n){this.digitalData.application.step=n.toLowerCase();}else{this.digitalData.application.step="";}this.digitalData.page.pageActivity.nameOfVideoDisplayed="";var m=DTM2.getInnerState();if(m){if(m==="empty"){m="";}window.s_appState=m;}this.digitalData.application.state=DTM2.utils.optVal(window.s_appState).getOrElse("");this.digitalData.application.currency=DTM2.getTransactionCurrency();this.digitalData.gtCustom.loginError=DTM2.getLoginErrorExist();if(e){this.digitalData.gtCustom.url=e;}if(window.s_tempCampaignFormat&&window.s_tempCampaignName){this.digitalData.internalCampaign.event.eventInfo.siteActionName=":"+window.s_tempCampaignFormat+"::"+window.s_tempCampaignName+":::";if(k!=="Internal campaign clickthroughs"&&k!=="Internal Campaign Impressions"&&k!=="App on Click Start Direct Call"){window.s_tempCampaignFormat=undefined;window.s_tempCampaignName=undefined;}}return this.digitalData;};})(window,window._satellite);